require 'spec_helper'

describe Router do
  let(:router){
    Router.new
  }
  it 'should return 5 for "add 5" ' do
    expect(router.result(["add",5])).to eq(5)
  end

  it 'should return 25 for "sqr 5" ' do
    expect(router.result(["sqr",5])).to eq(25)
  end

  context "Exit Check" do
    it 'should check if Process receives exit' do
      expect(Process).to receive(:exit)
      operation = Operation.new("exit" )
      router.result (operation)
    end
  end

  context "repeat" do
    it "should process last" do
      router.result(["add",5])
      router.result(["sub", 3])
      router.result(["mul",2 ])
      expect(router.result(["repeat",2])).to eq(2)
    end
  end
end